<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Basic CRUD App</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>

  <body onload="populateData()">
    <style>
      .new-label {
        color: red;
        font-weight: bold;
        animation: flash 1s infinite;
      }

      @keyframes flash {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }
      .btn-btn-edit {
        border: 1px solid black;
        border-radius: 5px;
        background-color: rgb(255, 255, 255);
        color: black;
        font-size: 14px;
        cursor: pointer;
        border-color: #010101;
        color: rgb(17, 17, 17);
      }

      .btn-edit:hover {
        background: #1a85dc;
        color: white;
      }

      .btn-del:hover {
        background: #dc1a1a;
        color: white;
      }
    </style>
    <h3 class="font-monospace p-2 text-center fw-bold bg-dark-subtle">
      Basic CRUD App using Node and Express
    </h3>
    <table class="table table-light table-striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Model</th>
          <th>Color</th>
          <th>Year</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="data-body"></tbody>
    </table>
    <button
      type="button"
      class="btn btn-primary"
      onclick="showForm()"
      data-bs-toggle="modal"
      data-bs-target="#addEditModal"
    >
      Add Record
    </button>

    <!-- Add and Edit Modal -->
    <div
      class="modal fade"
      id="addEditModal"
      tabindex="-1"
      aria-labelledby="addEditModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="addEditModalLabel">Add Record</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="m-2">
              <form>
                <input type="hidden" name="id" id="id" />
                <div class="row">
                  <div class="col m-2">
                    <input
                      type="text"
                      name="name"
                      class="form-control"
                      placeholder="Name"
                      id="name"
                      required
                    />
                  </div>
                  <div class="col m-2">
                    <input
                      type="text"
                      name="model"
                      class="form-control"
                      placeholder="Model"
                      id="model"
                      required
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col m-2">
                    <input
                      type="text"
                      name="color"
                      class="form-control"
                      placeholder="Color"
                      id="color"
                      required
                    />
                  </div>
                  <div class="col m-2">
                    <input
                      type="number"
                      name="year"
                      class="form-control"
                      placeholder="Year"
                      id="year"
                      pattern="{[0-9]}"
                      required
                    />
                  </div>
                  <span
                    id="validYear"
                    class="require ms-2 text-danger"
                    style="display: none"
                    >Enter Valid Year</span
                  >
                </div>
              </form>
              <span
                id="required"
                class="require ms-2 text-danger"
                style="display: none"
                >All Fields are required</span
              >
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              type="submit"
              class="btn btn-primary"
              id="addDetails"
              onclick="submitData()"
            >
              Submit
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Delete Modal -->
    <div
      class="modal fade"
      id="deleteModal"
      tabindex="-1"
      aria-labelledby="deleteModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="deleteModalLabel">
              Are you sure?
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            This Action can't be undone, Are you stil want to Delete?
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              No
            </button>
            <button
              type="submit"
              class="btn btn-primary"
              id="confirmDelete"
              data-bs-dismiss="modal"
            >
              Yes
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="./script.js"></script>
  </body>
</html>
